<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>NT Proto</title>
    <meta name="description" content="A-Frame NT Proto">
    <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
    <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-template-component@3.0.1"></script>
  </head>
  <body>
    <a-scene>
        <a-assets>
            <!-- panoramas -->
            <img id="home" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360-church/images/home.jpg">
            <img id="alter" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360-church/images/alter.jpg">

            <!-- marker -->
            <img id="marker" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360-church/images/marker.png">

            <!-- panels -->
            <img id="boatLabel" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360test/images/boat.png">
            <img id="harbourLabel" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360test/images/harbourside.png">
            <img id="sailingMast" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360test/images/sailingMast.png">
            <img id="porthole" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360test/images/porthole.png">
            <img id="sail" crossorigin="anonymous" src="https://garethwilliams.github.io/vrassets/protos/360test/images/sail.png">

            <!-- mixins -->
            <a-mixin id="areaSpace" begin="fusing" easing="ease-in" attribute="scale"
             fill="forwards" from="1 1 1" to="1.2 1.2 1.2" dur="200"></a-mixin>

        </a-assets>


        <a-entity class="scene" id="mainScene" visible="true">
            <a-sky id="main360" radius="10" src="#mainArea" rotation="-10 50 -10"></a-sky>
        </a-entity>

        <a-entity class="scene" id="boatScene" visible="false" >
            <a-sky id="boat360" radius="10" src="#boatArea" rotation="10 230 10"></a-sky>

        <a-entity onclick="openMrkOne()">
            <a-image id="markerOne" src="#marker" height="1" width="1" position="-3 3 -8" rotation="2 10 0" onclick="" visible="true">
            </a-image>
            <a-animation attribute="scale" from="0" to="1" fill="forwards" begin="10000"></a-animation>
        </a-entity>

        <a-entity>
            <a-image id="mrkOneInfo" src="#sailingMast" height="1" width="1" position="-5.17 0.53 -6.33" rotation="2 25 0" scale="5 5 5" onclick="" visible="false">
            </a-image>
        </a-entity>

        <a-entity onclick="openMrkTwo()">
            <a-image id="markerTwo" src="#marker" height="1" width="1" position="3.5 0 -8" rotation="2 5 0" onclick="" visible="true">
            </a-image>
        </a-entity>
        <a-entity>
            <a-image id="mrkTwoInfo" src="#porthole" height="1" width="1" position="5.17 3.00 -5.28" rotation="2 -32.84 0" scale="5 5 5" onclick="" visible="false">
            </a-image>
        </a-entity>

        <a-entity onclick="openMrkThree()">
            <a-image id="markerThree" src="#marker" height="1" width="1" position="5.74 7 -0.5" rotation="2 -60 0" onclick="" visible="true">
            </a-image>
        </a-entity>
        <a-entity>
            <a-image id="mrkThreeInfo" src="#sail" height="1" width="1" position="6.34 4.58 0.59" rotation="2 -84.46 0" scale="5 5 5" onclick="" visible="false">
            </a-image>
        </a-entity>

<!--             <a-image id="markerTwo" src="#marker" height="1" width="1" position="3.5 0 -8" rotation="2 5 0" onclick="" visible="true"></a-image>
            <a-image id="markerThree" src="#marker" height="1" width="1" position="5.74 7 -0.5" rotation="2 -60 0" onclick="" visible="true"></a-image> -->

        </a-entity>


        <script type="text/javascript">

            function jumpBoat() {
                document.getElementById('mainScene').setAttribute('visible', 'false')
                document.getElementById('boatScene').setAttribute('visible', 'true')
                document.getElementById('boatLabelLink').setAttribute('visible', 'false')
                document.getElementById('harbourLabelLink').setAttribute('visible', 'true')
                // document.querySelector('#markerOne').emit('mrkOneIn')
            }

            function jumpMain() {
                document.getElementById('mainScene').setAttribute('visible', 'true')
                document.getElementById('boatScene').setAttribute('visible', 'false')
                document.getElementById('boatLabelLink').setAttribute('visible', 'true')
                document.getElementById('harbourLabelLink').setAttribute('visible', 'false')
                document.getElementById('mrkOneInfo').setAttribute('visible', 'false')
                document.getElementById('mrkTwoInfo').setAttribute('visible', 'false')
                document.getElementById('mrkThreeInfo').setAttribute('visible', 'false')

            }

            function openMrkOne() {
                document.getElementById('mrkOneInfo').setAttribute('visible', 'true')
                document.getElementById('mrkTwoInfo').setAttribute('visible', 'false')
                document.getElementById('mrkThreeInfo').setAttribute('visible', 'false')
            }

            function openMrkTwo() {
                document.getElementById('mrkOneInfo').setAttribute('visible', 'false')
                document.getElementById('mrkTwoInfo').setAttribute('visible', 'true')
                document.getElementById('mrkThreeInfo').setAttribute('visible', 'false')
            }

            function openMrkThree() {
                document.getElementById('mrkOneInfo').setAttribute('visible', 'false')
                document.getElementById('mrkTwoInfo').setAttribute('visible', 'false')
                document.getElementById('mrkThreeInfo').setAttribute('visible', 'true')
            }
        </script>


        <a-image id="boatLabelLink" src="#boatLabel" height="1" width="2.2" position="2 -1 -5" rotation="-12.45 -19 4.12" onclick="jumpBoat()" visible="true"></a-image>

        <a-image id="harbourLabelLink" src="#harbourLabel" height="1" width="2.2" position="0 -2.8 0" rotation="-55 -20 -1" onclick="jumpMain()" visible="false"></a-image>


        <a-entity position="0 2.2 4">
            <a-entity camera look-controls wasd-controls>
                <a-entity position="0 0 -3"
                scale="0.4 0.4 0.4"
                geometry="primitive: ring; radiusOuter: 0.30;
                          radiusInner: 0.20;"
                material="color: cyan; shader: flat"
                cursor="maxDistance: 30; fuse: true; fuseTimeout: 1000" >
                    <a-animation begin="click" easing="ease-in" attribute="scale"
             fill="backwards" from="0.1 0.1 0.1" to="0.4 0.4 0.4" dur="150">
                    </a-animation>
                    <a-animation begin="fusing" easing="ease-in" attribute="scale"
             fill="forwards" from="0.4 0.4 0.4" to="0.1 0.1 0.1" dur="1500">
                    </a-animation>
                </a-entity>
            </a-entity>
        </a-entity>



    </a-scene>
  </body>
</html>
